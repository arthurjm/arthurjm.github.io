"use strict";(self["webpackChunkarthurjm_github_io"]=self["webpackChunkarthurjm_github_io"]||[]).push([[571],{116:function(e,t,i){i.d(t,{Z:function(){return y}});var o=i(252),n=i(577),s=i(963);const r=e=>((0,o.dD)("data-v-6f1ad5eb"),e=e(),(0,o.Cn)(),e),l={id:"configuration",class:"box"},a=r((()=>(0,o._)("h2",null,"Configurer la partie",-1))),c={id:"parameters"},d=["for"],u=["id","onUpdate:modelValue"],h=["value"];function m(e,t,i,r,m,g){return(0,o.wg)(),(0,o.iD)("div",l,[a,(0,o._)("div",c,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.config,((t,i)=>((0,o.wg)(),(0,o.iD)("div",{key:i,class:"parameter"},[(0,o._)("label",{for:i},(0,n.zw)(t.name)+" :",9,d),(0,o.wy)((0,o._)("select",{id:i,"onUpdate:modelValue":t=>e.selected[i]=t},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.choices,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:e},(0,n.zw)(e),9,h)))),128))],8,u),[[s.bM,e.selected[i]]])])))),128))]),(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>g.launchGame&&g.launchGame(...e)),class:"button"},"Valider")])}var g={name:"configure-component",props:["config"],emits:["launchGame"],data:function(){return{selected:{}}},mounted(){for(const e in this.config)this.selected[e]=this.config[e].choices[0]},methods:{launchGame(){this.$emit("launchGame",this.selected)}}},p=i(744);const f=(0,p.Z)(g,[["render",m],["__scopeId","data-v-6f1ad5eb"]]);var y=f},571:function(e,t,i){i.r(t),i.d(t,{default:function(){return k}});var o=i(252),n=i(577);const s={key:1,id:"rythm"},r={id:"score",class:"box"},l={id:"game",ref:"game"},a={id:"notes"},c=["data-key"],d={id:"keys",ref:"keys"},u=["onTouchstart"],h={class:"line",ref:"line"},m={id:"separators"};function g(e,t,i,g,p,f){const y=(0,o.up)("Configuration"),v=(0,o.Q2)("visibility");return e.isOngoing?((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",r,[(0,o._)("p",null,"Score : "+(0,n.zw)(e.score),1),(0,o._)("p",null,"Multiplicateur : "+(0,n.zw)(e.multiplier),1)]),(0,o._)("div",l,[(0,o._)("div",a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.notes,(([e,t])=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:(0,n.C_)([t,"note"]),"data-key":e},null,10,c)))),128))]),(0,o._)("div",d,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.colors,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"key",onTouchstart:e=>f.pressColor(t)},[(0,o.wy)((0,o._)("div",null,null,512),[[v,e]])],40,u)))),128))],512),(0,o._)("div",h,null,512),(0,o._)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys(e.colors).length-1,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"separator"})))),128))])],512)])):((0,o.wg)(),(0,o.j4)(y,{key:0,onLaunchGame:f.launchGame,config:e.config},null,8,["onLaunchGame","config"]))}var p=i(116),f=i(971),y={name:"rythm-view",components:{Configuration:p.Z},data:function(){return{isOngoing:!1,config:{time:{name:"Temps (en secondes)",choices:["60","120","180"]}},colors:{red:!1,blue:!1,green:!1,yellow:!1,purple:!1},notes:new Map,time:0,maxNotes:3,id:0,score:0,multiplier:1,actions:{},keys:[],controlsHandler:f.T,partititionId:0}},created(){f.T.addControl("rythm","redBtn",{key:"a",function:this.pressColor,arguments:"red"}),f.T.addControl("rythm","blueBtn",{key:"z",function:this.pressColor,arguments:"blue"}),f.T.addControl("rythm","greenBtn",{key:"e",function:this.pressColor,arguments:"green"}),f.T.addControl("rythm","yellowBtn",{key:"o",function:this.pressColor,arguments:"yellow"}),f.T.addControl("rythm","purpleBtn",{key:"p",function:this.pressColor,arguments:"purple"})},beforeUnmount(){clearInterval(this.partititionId),f.T.removeCategory("rythm")},methods:{launchGame(e){this.time=e.time,this.isOngoing=!0,this.partition(1e3*this.time)},pressColor(e){if(!this.colors[e].display){const t=this.$refs.line.getBoundingClientRect(),i=t.y,o=t.y+t.height,n=document.getElementsByClassName("note "+e);let s=!1;for(const e of n){const t=e.getBoundingClientRect(),n=t.y,r=t.y+t.height;if(!(r<i&&r<o||n>i&&n>o)){const t=parseInt(e.dataset.key);this.notes.delete(t),s=!0}}this.updateScore(s),this.colors[e]=!0,setTimeout((()=>{this.colors[e]=!1}),100)}},addNote(e){const t=this.id;this.id++,this.notes.set(t,e),setTimeout((()=>{this.notes.delete(t)&&this.updateScore(!1)}),4e3)},partition(e){this.partititionId=setInterval((()=>{let e=Math.ceil(Math.random()*this.maxNotes);while(e>0){const t=this.randomColor();this.addNote(t),--e}}),1e3),setTimeout((()=>{clearInterval(this.partititionId)}),e)},randomColor(){const e=Object.keys(this.colors);return e[Math.floor(Math.random()*e.length)]},updateScore(e){e?(this.multiplier<10&&this.multiplier++,this.score+=10*this.multiplier):(this.multiplier=1,this.score-=5)}}},v=i(744);const w=(0,v.Z)(y,[["render",g],["__scopeId","data-v-0a9fc371"]]);var k=w}}]);
//# sourceMappingURL=571-legacy.2716ca83.js.map