{"version":3,"file":"js/571.2716ca83.js","mappings":"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","sources":["webpack://arthurjm.github.io/./src/components/Configuration.vue","webpack://arthurjm.github.io/./src/components/Configuration.vue?3146","webpack://arthurjm.github.io/./src/views/Rythm.vue","webpack://arthurjm.github.io/./src/views/Rythm.vue?eee0"],"sourcesContent":["<template>\n  <div id=\"configuration\" class=\"box\">\n    <h2>Configurer la partie</h2>\n    <div id=\"parameters\">\n      <div v-for=\"(option, o) in this.config\" :key=\"o\" class=\"parameter\">\n        <label :for=\"o\">{{ option.name }} :</label>\n        <select :id=\"o\" v-model=\"selected[o]\">\n          <option\n            v-for=\"(choice, c) in option.choices\"\n            :key=\"c\"\n            :value=\"choice\"\n          >\n            {{ choice }}\n          </option>\n        </select>\n      </div>\n    </div>\n    <button @click=\"launchGame\" class=\"button\">Valider</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"configure-component\",\n\n  props: [\"config\"],\n\n  emits: [\"launchGame\"],\n\n  data: function () {\n    return {\n      selected: {},\n    };\n  },\n\n  mounted() {\n    for (const i in this.config) {\n      this.selected[i] = this.config[i].choices[0];\n    }\n  },\n\n  methods: {\n    launchGame() {\n      this.$emit(\"launchGame\", this.selected);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nh2 {\n  margin: 0;\n}\n\n#parameters {\n  width: 100%;\n  margin: 1% 0;\n}\n\n.parameter {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 75%;\n  margin-bottom: 2%;\n  margin: 2% auto;\n}\n\nselect {\n  padding: 5px;\n  user-select: none;\n}\n</style>\n","import { render } from \"./Configuration.vue?vue&type=template&id=6f1ad5eb&scoped=true\"\nimport script from \"./Configuration.vue?vue&type=script&lang=js\"\nexport * from \"./Configuration.vue?vue&type=script&lang=js\"\n\nimport \"./Configuration.vue?vue&type=style&index=0&id=6f1ad5eb&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/arthurjm.github.io/arthurjm.github.io/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f1ad5eb\"]])\n\nexport default __exports__","<template>\n  <Configuration v-if=\"!isOngoing\" @launchGame=\"launchGame\" :config=\"config\" />\n  <div v-else id=\"rythm\">\n    <div id=\"score\" class=\"box\">\n      <p>Score : {{ score }}</p>\n      <p>Multiplicateur : {{ multiplier }}</p>\n    </div>\n    <div id=\"game\" ref=\"game\">\n      <div id=\"notes\">\n        <div\n          v-for=\"[k, c] in notes\"\n          :key=\"k\"\n          :class=\"c\"\n          class=\"note\"\n          :data-key=\"k\"\n        ></div>\n      </div>\n\n      <div id=\"keys\" ref=\"keys\">\n        <div\n          v-for=\"(display, color) in colors\"\n          :key=\"color\"\n          class=\"key\"\n          @touchstart=\"pressColor(color)\"\n        >\n          <div v-visibility=\"display\"></div>\n        </div>\n      </div>\n      <div class=\"line\" ref=\"line\"></div>\n\n      <div id=\"separators\">\n        <div\n          v-for=\"n in Object.keys(colors).length - 1\"\n          :key=\"n\"\n          class=\"separator\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Configuration from \"@/components/Configuration.vue\";\n\nimport { controlsHandler } from \"@/js/controlsHandler.js\";\n\nexport default {\n  name: \"rythm-view\",\n\n  components: {\n    Configuration,\n  },\n\n  data: function () {\n    return {\n      isOngoing: false,\n      config: {\n        time: {\n          name: \"Temps (en secondes)\",\n          choices: [\"60\", \"120\", \"180\"],\n        },\n      },\n      colors: {\n        red: false,\n        blue: false,\n        green: false,\n        yellow: false,\n        purple: false,\n      },\n      notes: new Map(),\n      time: 0,\n      maxNotes: 3,\n      id: 0,\n      score: 0,\n      multiplier: 1,\n      actions: {},\n      keys: [],\n      controlsHandler,\n      partititionId: 0,\n    };\n  },\n\n  created() {\n    controlsHandler.addControl(\"rythm\", \"redBtn\", {\n      key: \"a\",\n      function: this.pressColor,\n      arguments: \"red\",\n    });\n    controlsHandler.addControl(\"rythm\", \"blueBtn\", {\n      key: \"z\",\n      function: this.pressColor,\n      arguments: \"blue\",\n    });\n    controlsHandler.addControl(\"rythm\", \"greenBtn\", {\n      key: \"e\",\n      function: this.pressColor,\n      arguments: \"green\",\n    });\n    controlsHandler.addControl(\"rythm\", \"yellowBtn\", {\n      key: \"o\",\n      function: this.pressColor,\n      arguments: \"yellow\",\n    });\n    controlsHandler.addControl(\"rythm\", \"purpleBtn\", {\n      key: \"p\",\n      function: this.pressColor,\n      arguments: \"purple\",\n    });\n  },\n\n  beforeUnmount() {\n    clearInterval(this.partititionId);\n    controlsHandler.removeCategory(\"rythm\");\n  },\n\n  methods: {\n    launchGame(params) {\n      this.time = params.time;\n      this.isOngoing = true;\n      this.partition(this.time * 1000);\n    },\n\n    pressColor(color) {\n      if (!this.colors[color].display) {\n        const lineRect = this.$refs.line.getBoundingClientRect();\n        const lineRectY1 = lineRect.y;\n        const lineRectY2 = lineRect.y + lineRect.height;\n\n        const notes = document.getElementsByClassName(\"note \" + color);\n\n        let intersect = false;\n        for (const note of notes) {\n          const noteRect = note.getBoundingClientRect();\n          const noteRectY1 = noteRect.y;\n          const noteRectY2 = noteRect.y + noteRect.height;\n\n          // if key intersect note\n          if (\n            !(\n              (noteRectY2 < lineRectY1 && noteRectY2 < lineRectY2) ||\n              (noteRectY1 > lineRectY1 && noteRectY1 > lineRectY2)\n            )\n          ) {\n            const key = parseInt(note.dataset.key);\n            this.notes.delete(key);\n            intersect = true;\n          }\n        }\n\n        this.updateScore(intersect);\n\n        // display key\n        this.colors[color] = true;\n        setTimeout(() => {\n          this.colors[color] = false;\n        }, 100);\n      }\n    },\n\n    addNote(color) {\n      // const key = performance.now();\n      const key = this.id;\n      this.id++;\n      this.notes.set(key, color);\n      setTimeout(() => {\n        if (this.notes.delete(key)) {\n          this.updateScore(false);\n        }\n      }, 4000);\n    },\n\n    partition(time) {\n      this.partititionId = setInterval(() => {\n        let notesNumber = Math.ceil(Math.random() * this.maxNotes);\n        while (notesNumber > 0) {\n          const color = this.randomColor();\n          this.addNote(color);\n          --notesNumber;\n        }\n      }, 1000);\n\n      setTimeout(() => {\n        clearInterval(this.partititionId);\n      }, time);\n    },\n\n    randomColor() {\n      const colors = Object.keys(this.colors);\n      return colors[Math.floor(Math.random() * colors.length)];\n    },\n\n    updateScore(intersect) {\n      if (intersect) {\n        if (this.multiplier < 10) {\n          this.multiplier++;\n        }\n        this.score += 10 * this.multiplier;\n      } else {\n        this.multiplier = 1;\n        this.score -= 5;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n#rythm {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n\n#score {\n  user-select: none;\n  margin: 0 auto;\n}\n\n#score p {\n  margin: 0;\n}\n\n@media screen and (max-height: 1000px) {\n  #game {\n    margin: auto;\n  }\n}\n\n@media screen and (min-height: 1000px) {\n  #game {\n    margin: 1.5% auto;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  #game {\n    --game-width: 100%;\n  }\n}\n\n@media screen and (min-width: 600px) {\n  #game {\n    --game-width: 500px;\n  }\n}\n\n@media screen and (min-height: 1000px) and (min-width: 600px) {\n  #game {\n    padding: 0;\n    border: solid 3px var(--border-primary-color);\n    border-radius: 7px;\n  }\n}\n\n#game {\n  z-index: 0;\n  --note-width: 20%;\n  --note-height: 5%;\n  --line-width: 1%;\n  --game-height: 100%;\n  position: relative;\n  width: var(--game-width);\n  height: var(--game-height);\n  background-color: grey;\n  user-select: none;\n}\n\n/* Notes */\n.note {\n  z-index: 1;\n  position: absolute;\n  width: var(--note-width);\n  height: var(--note-height);\n  animation: 4s linear 0s infinite drop;\n}\n\n@keyframes drop {\n  from {\n    top: 0;\n  }\n  to {\n    top: calc(var(--game-height) - var(--note-height));\n  }\n}\n\n/* Colors */\n.red {\n  background-color: red;\n  left: calc((var(--note-width)) * 0);\n}\n\n.blue {\n  background-color: blue;\n  left: calc((var(--note-width)) * 1);\n}\n\n.green {\n  background-color: green;\n  left: calc((var(--note-width)) * 2);\n}\n\n.yellow {\n  background-color: yellow;\n  left: calc((var(--note-width)) * 3);\n}\n\n.purple {\n  background-color: purple;\n  left: calc((var(--note-width)) * 4);\n}\n\n/* Keys and line*/\n#keys {\n  display: flex;\n  justify-content: space-evenly;\n}\n\n.line {\n  z-index: 2;\n  background-color: black;\n}\n\n.key > div,\n.line {\n  position: absolute;\n  width: 100%;\n  top: calc(var(--game-height) * 0.8);\n  height: calc(var(--line-width) * 2);\n}\n\n#keys {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.key {\n  z-index: 3;\n  width: 100%;\n}\n\n.key > div {\n  width: var(--note-width);\n  background-color: white;\n}\n\n/* Separators */\n#separators {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: space-evenly;\n  height: 100%;\n  width: 100%;\n}\n\n.separator {\n  z-index: 4;\n  width: calc(var(--line-width) * 1.2);\n  height: 100%;\n  background-color: black;\n}\n</style>\n","import { render } from \"./Rythm.vue?vue&type=template&id=0a9fc371&scoped=true\"\nimport script from \"./Rythm.vue?vue&type=script&lang=js\"\nexport * from \"./Rythm.vue?vue&type=script&lang=js\"\n\nimport \"./Rythm.vue?vue&type=style&index=0&id=0a9fc371&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/arthurjm.github.io/arthurjm.github.io/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0a9fc371\"]])\n\nexport default __exports__"],"names":["id","class","config","option","o","key","for","name","selected","choices","choice","c","value","launchGame","props","emits","data","mounted","i","this","methods","$emit","__exports__","render","ref","isOngoing","score","multiplier","notes","k","colors","display","color","pressColor","Object","keys","length","n","components","Configuration","time","red","blue","green","yellow","purple","Map","maxNotes","actions","controlsHandler","partititionId","created","function","arguments","beforeUnmount","clearInterval","params","partition","lineRect","$refs","line","getBoundingClientRect","lineRectY1","y","lineRectY2","height","document","getElementsByClassName","intersect","note","noteRect","noteRectY1","noteRectY2","parseInt","dataset","delete","updateScore","setTimeout","addNote","set","setInterval","notesNumber","Math","ceil","random","randomColor","floor"],"sourceRoot":""}