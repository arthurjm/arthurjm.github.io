"use strict";(self["webpackChunkarthurjm_github_io"]=self["webpackChunkarthurjm_github_io"]||[]).push([[500],{500:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var o=i(252),s=i(963),a=i(577);const n={id:"image-vue"},r={id:"editor"},h={id:"buttons"},d=(0,o._)("label",{for:"input-image",class:"button"},"Ouvrir un fichier",-1),m=(0,o._)("span",null,"ou",-1),l=(0,o.Uk)(" DÃ©poser un fichier ici ");function u(e,t,i,u,v,g){const c=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.wy)((0,o._)("div",r,[(0,o._)("canvas",{ref:"canvas",width:"1000",height:"1000",onMousedown:t[0]||(t[0]=(...e)=>g.startMove&&g.startMove(...e)),onMousemove:t[1]||(t[1]=(...e)=>g.mousemove&&g.mousemove(...e)),onMousewheel:t[2]||(t[2]=(...e)=>g.updateZoom&&g.updateZoom(...e))},null,544),(0,o._)("div",h,[(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>g.removeFile&&g.removeFile(...e))},[(0,o.Wm)(c,{icon:"trash-can",size:"2x"})]),(0,o._)("button",{onClick:t[4]||(t[4]=e=>g.rotate(90))},[(0,o.Wm)(c,{icon:"rotate-right",size:"2x"})]),(0,o._)("button",{onClick:t[5]||(t[5]=e=>g.rotate(-90))},[(0,o.Wm)(c,{icon:"rotate-left",size:"2x"})]),(0,o._)("button",{onClick:t[6]||(t[6]=e=>g.updateZoom(1))},[(0,o.Wm)(c,{icon:"plus",size:"2x"})]),(0,o._)("button",{onClick:t[7]||(t[7]=e=>g.updateZoom(-1))},[(0,o.Wm)(c,{icon:"minus",size:"2x"})])])],512),[[s.F8,e.file]]),(0,o.wy)((0,o._)("div",{id:"open-image",onDrop:t[9]||(t[9]=(...e)=>g.drop&&g.drop(...e)),onDragover:t[10]||(t[10]=(...e)=>g.dragOver&&g.dragOver(...e)),onDragleave:t[11]||(t[11]=(...e)=>g.dragLeave&&g.dragLeave(...e)),onDrag:e=>!0,class:(0,a.C_)([{"drag-over":e.isOver},"box"])},[d,(0,o._)("input",{id:"input-image",ref:"input-image",type:"file",accept:"image/*",onChange:t[8]||(t[8]=(...e)=>g.inputChange&&g.inputChange(...e))},null,544),m,(0,o._)("div",null,[l,(0,o.Wm)(c,{icon:"file-arrow-down"})])],34),[[s.F8,!e.file]])])}var v={name:"image-view",components:{},data:function(){return{isOver:!1,isDrag:!1,file:void 0,img:void 0,ctx:void 0,canvas:void 0,pos:{x:0,y:0},zoom:1,angle:0,move:!1}},mounted(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.img=document.createElement("img"),this.pos.x=Math.round(this.canvas.width/2),this.pos.y=Math.round(this.canvas.height/2),document.addEventListener("mouseup",this.stopeMove)},beforeUnmount(){document.removeEventListener("mouseup",this.stopeMove)},methods:{dragOver(e){e.preventDefault(),e.stopPropagation(),this.isOver=!0,this.isDrag=!1},dragLeave(e){e.preventDefault(),e.stopPropagation(),this.isOver=!1,this.isDrag=!1},drop(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.files.length>0&&this.loadFile(e.dataTransfer.files[0]),this.isOver=!1,this.isDrag=!1},inputChange(){this.$refs["input-image"].files.length>0&&this.loadFile(this.$refs["input-image"].files[0]),this.$refs["input-image"].value=[]},loadFile(e){this.file=e,this.zoom=1,this.pos={x:0,y:0};var t=/image.*/;if(e.type.match(t)){this.img.file=e;var i=new FileReader;i.addEventListener("load",(e=>{this.img.src=e.target.result})),this.img.addEventListener("load",(()=>{this.render()})),i.readAsDataURL(e)}},removeFile(){this.file=void 0,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},render(){let e=this.img,t=this.canvas,i=this.ctx;i.setTransform(1,0,0,1,0,0),i.fillRect(0,0,t.width,t.height);let o={x:t.width/e.width,y:t.height/e.height};o=Math.min(o.x,o.y)*this.zoom;let s=this.angle*Math.PI/180;i.translate(t.width/2,t.height/2),i.translate(this.pos.x,this.pos.y),i.rotate(s),i.translate(-e.width*o/2,-e.height*o/2),i.scale(o,o),i.drawImage(e,0,0)},startMove(){this.move=!0},stopeMove(){this.move=!1},mousemove(e){this.move&&(this.pos.x+=e.movementX,this.pos.y+=e.movementY,this.render())},rotate(e){this.angle=(this.angle+e)%360,this.render()},updateZoom(e){let t=Math.sign(-e.deltaY)||e,i=Math.max(this.zoom+.1*t,.1);i=Math.min(i,2),this.zoom=i,this.render()}}},g=i(744);const c=(0,g.Z)(v,[["render",u]]);var p=c}}]);
//# sourceMappingURL=500.82982cfb.js.map