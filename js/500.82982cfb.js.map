{"version":3,"file":"js/500.82982cfb.js","mappings":"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","sources":["webpack://arthurjm.github.io/./src/views/Image.vue","webpack://arthurjm.github.io/./src/views/Image.vue?bb38"],"sourcesContent":["<template>\n  <div id=\"image-vue\">\n    <div v-show=\"file\" id=\"editor\">\n      <canvas\n        ref=\"canvas\"\n        width=\"1000\"\n        height=\"1000\"\n        @mousedown=\"startMove\"\n        @mousemove=\"mousemove\"\n        @mousewheel=\"updateZoom\"\n      ></canvas>\n      <div id=\"buttons\">\n        <button @click=\"removeFile\">\n          <font-awesome-icon icon=\"trash-can\" size=\"2x\" />\n        </button>\n        <button @click=\"rotate(90)\">\n          <font-awesome-icon icon=\"rotate-right\" size=\"2x\" />\n        </button>\n        <button @click=\"rotate(-90)\">\n          <font-awesome-icon icon=\"rotate-left\" size=\"2x\" />\n        </button>\n        <button @click=\"updateZoom(1)\">\n          <font-awesome-icon icon=\"plus\" size=\"2x\" />\n        </button>\n        <button @click=\"updateZoom(-1)\">\n          <font-awesome-icon icon=\"minus\" size=\"2x\" />\n        </button>\n      </div>\n    </div>\n\n    <div\n      v-show=\"!file\"\n      id=\"open-image\"\n      @drop=\"drop\"\n      @dragover=\"dragOver\"\n      @dragleave=\"dragLeave\"\n      @drag=\"true\"\n      :class=\"{ 'drag-over': isOver }\"\n      class=\"box\"\n    >\n      <label for=\"input-image\" class=\"button\">Ouvrir un fichier</label>\n      <input\n        id=\"input-image\"\n        ref=\"input-image\"\n        type=\"file\"\n        accept=\"image/*\"\n        @change=\"inputChange\"\n      />\n      <span>ou</span>\n      <div>\n        DÃ©poser un fichier ici <font-awesome-icon icon=\"file-arrow-down\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"image-view\",\n\n  components: {},\n\n  data: function () {\n    return {\n      isOver: false,\n      isDrag: false,\n\n      file: undefined,\n      img: undefined,\n      ctx: undefined,\n      canvas: undefined,\n\n      pos: {\n        x: 0,\n        y: 0,\n      },\n      zoom: 1,\n      angle: 0,\n\n      move: false,\n    };\n  },\n\n  mounted() {\n    this.canvas = this.$refs.canvas;\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.img = document.createElement(\"img\");\n\n    this.pos.x = Math.round(this.canvas.width / 2);\n    this.pos.y = Math.round(this.canvas.height / 2);\n\n    document.addEventListener(\"mouseup\", this.stopeMove);\n  },\n\n  beforeUnmount() {\n    document.removeEventListener(\"mouseup\", this.stopeMove);\n  },\n\n  methods: {\n    dragOver(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.isOver = true;\n      this.isDrag = false;\n    },\n\n    dragLeave(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.isOver = false;\n      this.isDrag = false;\n    },\n\n    drop(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (event.dataTransfer.files.length > 0) {\n        this.loadFile(event.dataTransfer.files[0]);\n      }\n\n      this.isOver = false;\n      this.isDrag = false;\n    },\n\n    inputChange() {\n      if (this.$refs[\"input-image\"].files.length > 0) {\n        this.loadFile(this.$refs[\"input-image\"].files[0]);\n      }\n\n      this.$refs[\"input-image\"].value = [];\n    },\n\n    loadFile(file) {\n      this.file = file;\n      this.zoom = 1;\n      this.pos = {\n        x: 0,\n        y: 0,\n      };\n\n      var imageType = /image.*/;\n      if (!file.type.match(imageType)) {\n        return;\n      }\n\n      this.img.file = file;\n      var reader = new FileReader();\n\n      reader.addEventListener(\"load\", (event) => {\n        this.img.src = event.target.result;\n      });\n\n      this.img.addEventListener(\"load\", () => {\n        this.render();\n      });\n\n      reader.readAsDataURL(file);\n    },\n\n    removeFile() {\n      this.file = undefined;\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    },\n\n    render() {\n      let img = this.img;\n      let canvas = this.canvas;\n      let ctx = this.ctx;\n\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      let ratio = {\n        x: canvas.width / img.width,\n        y: canvas.height / img.height,\n      };\n      ratio = Math.min(ratio.x, ratio.y) * this.zoom;\n\n      let rad = (this.angle * Math.PI) / 180;\n\n      ctx.translate(canvas.width / 2, canvas.height / 2);\n      ctx.translate(this.pos.x, this.pos.y);\n      ctx.rotate(rad);\n      // -canvas.width / 2 : annule premier translate\n      // (canvas.width - img.width * ratio) / 2 : centre image\n      // (-canvas.width / 2) + ((canvas.width - img.width * ratio) / 2) = -img.width * ratio / 2\n      ctx.translate((-img.width * ratio) / 2, (-img.height * ratio) / 2);\n      ctx.scale(ratio, ratio);\n\n      ctx.drawImage(img, 0, 0);\n    },\n\n    startMove() {\n      this.move = true;\n    },\n\n    stopeMove() {\n      this.move = false;\n    },\n\n    mousemove(event) {\n      if (this.move) {\n        this.pos.x += event.movementX;\n        this.pos.y += event.movementY;\n        this.render();\n      }\n    },\n\n    rotate(angle) {\n      this.angle = (this.angle + angle) % 360;\n      this.render();\n    },\n\n    updateZoom(e) {\n      let sign = Math.sign(-e.deltaY) || e;\n      let zoom = Math.max(this.zoom + 0.1 * sign, 0.1);\n      zoom = Math.min(zoom, 2.0);\n      this.zoom = zoom;\n      this.render();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n#image-vue {\n  position: relative;\n}\n\n.drag-over {\n  background-color: var(--success-color) !important;\n}\n\n#open-image > * {\n  width: fit-content;\n  margin: 3px auto;\n}\n\n#drop-text {\n  display: flex;\n  justify-content: space-around;\n  height: 100%;\n  width: 100%;\n  align-items: center;\n}\n\n#buttons {\n  display: flex;\n  position: absolute;\n  top: 0;\n  flex-direction: column;\n  background-color: var(--background-secondary-color);\n  border: 1px solid var(--border-primary-color);\n  padding: 4px;\n}\n\n#buttons > * {\n  margin: 2px;\n  cursor: pointer;\n}\n\ninput[type=\"file\"] {\n  display: none;\n}\n</style>\n","import { render } from \"./Image.vue?vue&type=template&id=4bfc3840\"\nimport script from \"./Image.vue?vue&type=script&lang=js\"\nexport * from \"./Image.vue?vue&type=script&lang=js\"\n\nimport \"./Image.vue?vue&type=style&index=0&id=4bfc3840&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/arthurjm.github.io/arthurjm.github.io/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["id","for","class","ref","width","height","startMove","mousemove","updateZoom","removeFile","icon","size","rotate","file","drop","dragOver","dragLeave","isOver","type","accept","inputChange","name","components","data","isDrag","undefined","img","ctx","canvas","pos","x","y","zoom","angle","move","mounted","this","$refs","getContext","document","createElement","Math","round","addEventListener","stopeMove","beforeUnmount","removeEventListener","methods","event","preventDefault","stopPropagation","dataTransfer","files","length","loadFile","value","imageType","match","reader","FileReader","src","target","result","render","readAsDataURL","clearRect","setTransform","fillRect","ratio","min","rad","PI","translate","scale","drawImage","movementX","movementY","e","sign","deltaY","max","__exports__"],"sourceRoot":""}